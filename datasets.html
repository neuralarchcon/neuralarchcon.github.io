---
layout: index
title: Datasets
tagline:
tags : [datasets, info]
img :
img-mobile :
author : Marcin Koculak
css:
js:
keywords: components
canonical:
---

<style>
.accordion .card {
    margin-bottom: 1rem;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
}

.accordion .card-header {
    background-color: #f8f9fa;
    padding: 0;
}

.accordion .card-header h2 {
    margin: 0;
}

.accordion .card-header .btn-link {
    color: #333;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.25rem;
    padding: 1rem 1.25rem;
}

.accordion .card-header .btn-link:hover {
    color: #007bff;
    text-decoration: none;
}

.accordion .card-header .btn-link:focus {
    text-decoration: none;
    box-shadow: none;
}

.accordion .card-body {
    padding: 1.25rem;
}

.dataset-item {
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid #eee;
}

.dataset-item:last-child {
    border-bottom: none;
}
</style>
{% include JB/setup %}

<div class="container">
    <div class="page-header-title">
        <h2 class="heading-title color-title text-left">Datasets</h2>
    </div>
</div>

<!-- Datasets content + sidebar -->
<section class="datasets">
    <div class="container">
        <div class="row">

            <!-- Selectors for datasets-->
            <div class="col-sm-12 col-md-3">
                <input type="text" id="datasetInput" placeholder="Search for a Dataset.." title="Type in a word"><br />

                <br>
                <!-- Dynamically generate domain checkboxes -->
                <span><strong>Domain:</strong></span><br>
                {% assign all_domains = "" | split: "" %}
                {% for dataset in site.datasets %}
                    {% for domain in dataset.domain %}
                        {% unless all_domains contains domain %}
                            {% assign all_domains = all_domains | push: domain %}
                        {% endunless %}
                    {% endfor %}
                {% endfor %}
                {% assign sorted_domains = all_domains | sort %}
                {% for domain in sorted_domains %}
                <input type="checkbox" class="domainCheckbox" name="{{ domain | slugify }}Checkbox" value="{{ domain }}"> {{ domain | capitalize }}<br>
                {% endfor %}

                <br>
                <span><strong>Site:</strong></span><br>
                <input type="checkbox" class="siteCheckbox" name="AarhusCheckbox" value="Aarhus"> Aarhus<br>
                <input type="checkbox" class="siteCheckbox" name="BrnoCheckbox" value="Brno"> Brno<br>
                <input type="checkbox" class="siteCheckbox" name="KrakowCheckbox" value="Krakow"> Krakow<br>
            </div>

            <div class="col-sm-12 col-md-9">
                <!-- Collect all unique modalities -->
                {% assign all_modalities = "" | split: "" %}
                {% for dataset in site.datasets %}
                    {% for modality in dataset.modality %}
                        {% unless all_modalities contains modality %}
                            {% assign all_modalities = all_modalities | push: modality %}
                        {% endunless %}
                    {% endfor %}
                {% endfor %}
                {% assign sorted_modalities = all_modalities | sort %}

                <!-- Create accordion for each modality category -->
                <div class="accordion" id="datasetAccordion">
                    {% for modality in sorted_modalities %}
                    <div class="card modality-section" data-modality="{{ modality }}">
                        <div class="card-header" id="heading{{ modality | slugify }}">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse{{ modality | slugify }}" aria-expanded="true" aria-controls="collapse{{ modality | slugify }}">
                                    {{ modality | capitalize }}
                                </button>
                            </h2>
                        </div>

                        <div id="collapse{{ modality | slugify }}" class="collapse" aria-labelledby="heading{{ modality | slugify }}" data-parent="#datasetAccordion">
                            <div class="card-body">
                                <div class="datasets-list post-content-area">
                                    {% for dataset in site.datasets %}
                                        {% if dataset.modality contains modality %}
                                        <div class="dataset-item post-content-area" data-modality="{{ dataset.modality | join: ',' }}">
                                            <div class="dataset-post" data-participants="{{ dataset.participants | default: 0 }}">
                                                <h3><a href="{{ BASE_PATH }}{{ dataset.url }}">{{ dataset.title }}</a></h3>
                                                <p class="datasets-excerpt">{{ dataset.summary | strip_html }}</p>
                                            </div>
                                            <div class="dataset-meta">
                                                <span class="metadata" id="domain-display"><strong>Domain:</strong> {{ dataset.domain | join: ", " }}</span>
                                                <span class="metadata" id="domain" style="display: none;">{{ dataset.domain | join: ", " }}</span>
                                                <span class="metadata" id="site"><strong>Site:</strong> {{ dataset.site | join: ", " }}</span>
                                            </div>
                                        </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
</section>

<script>
    function findTextInTitle(text, element) {
        var title = element.querySelector('h3').textContent.toLowerCase() || '';
        if (title.includes(text.toLowerCase())) {
            return true;
        }
        return false;
    };

    function checkSite(site, element) {
        var datasetSite = element.querySelector('#site').textContent.toLowerCase() || '';
        return datasetSite.includes(site.toLowerCase());
    };

    function checkDomain(domain, element) {
        var datasetDomain = element.querySelector('#domain').textContent.toLowerCase() || '';
        return datasetDomain.includes(domain.toLowerCase());
    };

    document.addEventListener('DOMContentLoaded', function () {
        const datasetInput = document.getElementById('datasetInput');
        const datasets = document.querySelectorAll('.dataset-item');
        const siteCheckboxes = document.querySelectorAll('.siteCheckbox');
        const siteCheckboxesArray = Array.from(siteCheckboxes);
        const domainCheckboxes = document.querySelectorAll('.domainCheckbox');
        const domainCheckboxesArray = Array.from(domainCheckboxes);
        const modalitySections = document.querySelectorAll('.modality-section');

        function decideVisibility(element) {
            const matchesTitle = findTextInTitle(datasetInput.value, element);

            var meetsSiteCriteria = siteCheckboxesArray.some(checkbox => checkbox.checked && checkSite(checkbox.value, element));
            // If no site checkboxes are checked, consider it as meeting the criteria
            if (siteCheckboxesArray.every(checkbox => !checkbox.checked)) {
                meetsSiteCriteria = true;
            }

            var meetsDomainCriteria = domainCheckboxesArray.some(checkbox => checkbox.checked && checkDomain(checkbox.value, element));
            // If no domain checkboxes are checked, consider it as meeting the criteria
            if (domainCheckboxesArray.every(checkbox => !checkbox.checked)) {
                meetsDomainCriteria = true;
            }

            const valueVector = [
                matchesTitle,
                meetsSiteCriteria,
                meetsDomainCriteria
            ];

            if (valueVector.every(Boolean)) {
                element.style.display = '';
                return true;
            } else {
                element.style.display = 'none';
                return false;
            };
        };

        function updateSectionVisibility() {
            modalitySections.forEach(section => {
                const datasetsInSection = section.querySelectorAll('.dataset-item');
                const hasVisibleDatasets = Array.from(datasetsInSection).some(dataset => dataset.style.display !== 'none');

                if (hasVisibleDatasets) {
                    section.style.display = '';
                } else {
                    section.style.display = 'none';
                }
            });
        };

        function filterDatasets() {
            datasets.forEach(dataset => {
                decideVisibility(dataset);
            });
            updateSectionVisibility();
        };

        datasetInput.addEventListener('input', filterDatasets);

        siteCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', filterDatasets);
        });

        domainCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', filterDatasets);
        });
    });
</script>